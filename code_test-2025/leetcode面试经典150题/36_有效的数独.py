# 36. 有效的数独
# 中等

from typing import List

class Solution:
    def isValidSudoku(self, board: List[List[str]]) -> bool:
        """
        判断一个 9 x 9 的数独是否有效
        
        思路解析：
        1. 创建三个字典来分别跟踪每行、每列和每个3x3子网格中已出现的数字
        2. 遍历整个9x9数独板，对于每个非'.'的单元格：
           - 检查该数字是否已在当前行、列或3x3子网格中出现过
           - 如果出现过，返回False；否则将该数字添加到对应集合中
        3. 如果遍历完整个数独板没有发现重复，则返回True
        
        参数:
            board: List[List[str]] - 9x9的数独板，其中'.'表示空格
        
        返回:
            bool - 数独是否有效
        """
        # 创建三个字典，分别存储每行、每列和每个3x3子网格中出现的数字
        rows = [set() for _ in range(9)]
        cols = [set() for _ in range(9)]
        boxes = [set() for _ in range(9)]
        
        # 遍历数独板
        for i in range(9):
            for j in range(9):
                # 获取当前单元格的值
                num = board[i][j]
                
                # 如果单元格为空，跳过
                if num == '.':
                    continue
                
                # 计算当前单元格属于哪个3x3子网格
                # 使用公式: (行索引 // 3) * 3 + (列索引 // 3)
                box_index = (i // 3) * 3 + (j // 3)
                
                # 检查数字是否在当前行、列或3x3子网格中已存在
                if num in rows[i] or num in cols[j] or num in boxes[box_index]:
                    return False
                
                # 将数字添加到对应集合中
                rows[i].add(num)
                cols[j].add(num)
                boxes[box_index].add(num)
        
        # 遍历完整个数独板没有发现重复，返回True
        return True

# 测试样例
if __name__ == "__main__":
    solution = Solution()
    
    # 测试用例1: 有效的数独
    # 注意：这只是一个有效的数独配置，但不一定是可解的
    board1 = [
        ["5","3",".",".","7",".",".",".","."],
        ["6",".",".","1","9","5",".",".","."],
        [".","9","8",".",".",".",".","6","."],
        ["8",".",".",".","6",".",".",".","3"],
        ["4",".",".","8",".","3",".",".","1"],
        ["7",".",".",".","2",".",".",".","6"],
        [".","6",".",".",".",".","2","8","."],
        [".",".",".","4","1","9",".",".","5"],
        [".",".",".",".","8",".",".","7","9"]
    ]
    print(f"测试用例1结果: {solution.isValidSudoku(board1)}")  # 应该输出True
    
    # 测试用例2: 无效的数独（同一行有重复数字）
    board2 = [
        ["8","3",".",".","7",".",".",".","."],
        ["6",".",".","1","9","5",".",".","."],
        [".","9","8",".",".",".",".","6","."],
        ["8",".",".",".","6",".",".",".","3"],  # 第一列有两个8
        ["4",".",".","8",".","3",".",".","1"],
        ["7",".",".",".","2",".",".",".","6"],
        [".","6",".",".",".",".","2","8","."],
        [".",".",".","4","1","9",".",".","5"],
        [".",".",".",".","8",".",".","7","9"]
    ]
    print(f"测试用例2结果: {solution.isValidSudoku(board2)}")  # 应该输出False